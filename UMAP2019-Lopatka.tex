% Set options for wide aspect ratio and beamer document class
\documentclass[aspectratio=169]{beamer}

% Package imports
\usepackage{fontspec}
\usepackage{epigraph}
\usepackage{xcolor}
\usepackage[percent]{overpic}

% custom options to make epigraph look good on a beamer slide
\renewcommand{\epigraphrule}{0pt}
\setlength{\epigraphwidth}{.9\textwidth}
\renewcommand{\textflush}{flushepinormal}

\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

% default document font specifications
\setmainfont{FiraSans-Book}
\setsansfont{FiraSans-Book}
\definecolor{textcolour}{rgb}{255,255,255}

% Definign the Mozilla colour palette for presentations 
\definecolor{moz_dark_green}{RGB}{77,78,83}
\definecolor{moz_light_green}{RGB}{208,211,212}
\definecolor{moz_light_blue}{RGB}{0,150,221}
\definecolor{moz_dark_blue}{RGB}{0,33,71}
\definecolor{moz_accent_green}{RGB}{111,190,74}
\definecolor{moz_accent_yellow}{RGB}{255,203,0}
\definecolor{moz_accent_orange}{RGB}{255,149,0}
\definecolor{moz_accent_orange2}{RGB}{230,96,0}
\definecolor{moz_accent_red}{RGB}{193,56,50}

% new counter for column enumerates
\newcounter{savedenum}
\newcommand*{\saveenum}{\setcounter{savedenum}{\theenumi}}
\newcommand*{\resume}{\setcounter{enumi}{\thesavedenum}}

% Background for all slides set here
\setbeamertemplate{background canvas}{\includegraphics [width=\paperwidth]{bg_black.png}}

\setbeamercolor{structure}{fg=textcolour}

\setbeamerfont{title}{size = \Huge}
\setbeamercolor{normal text}{fg=textcolour}

%define specific fint size interpretations for the beamer presentation mode.
\renewcommand{\tiny}{\fontsize{7pt}{8pt}\selectfont}
\renewcommand{\scriptsize}{\fontsize{9pt}{12pt}\selectfont}
\renewcommand{\footnotesize}{\fontsize{10pt}{12pt}\selectfont}
\renewcommand{\small}{\fontsize{12pt}{18pt}\selectfont}
\renewcommand{\normalsize}{\fontsize{14pt}{18pt}\selectfont}
\renewcommand{\large}{\fontsize{16pt}{24pt}\selectfont}
\renewcommand{\Large}{\fontsize{24pt}{37pt}\selectfont}
\renewcommand{\LARGE}{\fontsize{31pt}{42pt}\selectfont}
\renewcommand{\huge}{\fontsize{48pt}{54pt}\selectfont}
\renewcommand{\Huge}{\fontsize{80pt}{96pt}\selectfont}

% remove navigation symbols
\setbeamertemplate{navigation symbols}{}
 
% After building the PDF you may ensure that local system fonts are embedded in the final PDF using:
% gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress -dEmbedAllFonts=true -sOutputFile=DN2018-lopatka-portable.pdf -f DN2018-Lopatka.pdf
% This will also compress the final output size 

\setbeameroption{show notes}
%\setbeameroption{show notes on second screen=right}

\begin{document}

%% slide 1
\begin{frame}
\begin{overpic}[width=0.7\textwidth]{taar2_compressed.png}
\end{overpic}
%% Speaker notes:
\note{
	\begin{itemize} 
		\item{Personalised web browsing experience is hard}
		\item{Especially with a rigorous and respectful privacy policy}
		\item{Ultimately, many of the approaches in UMAP strive to find innovative ways to extract a meaningful signal from very noisy data.}
	\end{itemize}
}
%%
\end{frame}

%% slide 2
{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{bg_alt_small-rlogo.png}}
\begin{frame}
\begin{overpic}[width=0.7\textwidth]{taar1_compressed.png}
\put(85, 7){\large{Martin Lopatka}}
\put(78, 1){\small{mlopatka@mozilla.com}}
\put(57.25, -5){\small{Data Scientist/Applied Statistician}}
\end{overpic}
%% Speaker notes:
\note{
    \begin{itemize}
        \item{Martin Lopatka}
        \item{Time we have through... Mozilla's approach to recommending browser extensions}
        \item{T.A.A.R.}
        \item{Curiosity vs. builders -> move \textbf{spatial anchor}}
        \item{given the time, focus on a very brief overview, and two specific design choices}
        \item{Privacy by design and CLLR}
\end{itemize}
}
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{bg_alt_small-rlogo.png}}
\begin{frame}
\frametitle{Telemetry}
\begin{center}\large{Firefox Telemetry (optionally) measures and collects non-personal, performance and usage information.}\footnote{https://wiki.mozilla.org/Telemetry}\end{center}
%% Speaker notes:
    \note{
        \begin{itemize}
\item{application localization identifier: (ch-de, br-pt)}
\item{operating system}
\item{subsession length}
\item{bookmark count}
\item{open tab count}
\item{unique TLDs}
\item{add-ons installed}
        \end{itemize}
    }
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{bg_alt_small-rlogo.png}}
\begin{frame}
\frametitle{\textbf{T}elemetry-\textbf{A}ware \textbf{A}dd-on \textbf{R}ecommender}
\begin{center}\includegraphics[width=0.8\textwidth]{taar-flow.png}\end{center}
%% Speaker notes:
    \note{
        \begin{itemize}
        \item{Full system Spec} 
        \item{Three modules each leveraging different subsets of client information based on availability.} 
        \item{Individual recommendations combined via linear stacked ensemble}
        \item{These are domain specific and specific to our telemetry infra, so lets treat them like black boxes}
        \item{more interesting is the comparison of functions for determining individual weighting of the recommendations.}     
        \end{itemize}
    }
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{LR-bg.jpg}}
\begin{frame}
\frametitle{Differential Privacy}
%% Speaker notes:
    \note{
        \begin{itemize}
        \item{Due diligence}
        \item{method for releasing a table of frequency counts while preserving a differential privacy guarentee. }
        \item{We adapt this technique to generate add-on installation frequency tables for each locale according to the following procedure}
        \item{Guards against Overfitting}        
        \end{itemize}
    }
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{LR-bg.jpg}}
\begin{frame}
\frametitle{Log Likelihood Ratio Cost (cLLR)}
\texttt{\noindent'zh-CN': [('guid\_01', 0.75),...,('guid\_02', 0.05)],\\
\noindent'fr-FR': [('guid\_03', 0.24),...,('guid\_04', 0.01)],\\
\noindent...,\\
\noindent'en-US': [('guid\_04', 0.18),...,(guid\_05', 0.02)]
}

include boxplots vs other metrics.
%% Speaker notes:
\note{
        \begin{itemize}
        \item{better usage of full signal if component modules a probabilistic (flavoured)}
        \item{better ensembles}        
        \item{generalizable}
        \item{Versus Discounted Cumulative Gain (DCG), and versus Mean Average Precision (MAP) for including in the recommendation list at all}
        \end{itemize}
    }
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{bg_alt_small-rlogo.png}}
\begin{frame}
\frametitle{Performance}
\begin{center}\includegraphics[width=0.8\textwidth]{taar-all-performance.png}\end{center}
%% Speaker notes:
    \note{
        \begin{itemize}
        \item{variable availability of our data, not only in terms of quantity but in terms of fields}
        \item{offer users granular choice in Telemetry}
        \item{Performs well and scales with data availability}
        \item{And 100\% open source} 
        \item{so if you are just curious or building something -> step back \textbf{spatial anchor}}
        \end{itemize}
    }
%
\end{frame}
}

{
\usebackgroundtemplate{\includegraphics[width=\paperwidth]{bg_alt_small-rlogo.png}}
\begin{frame}
\frametitle{Acknowledgements}
%% Speaker notes:
    \note{
        \begin{itemize}
        \item{Thank you all for choosing to come engage with me here}
        \item{I'll be happy... questions}        
        \item{but first... acknowledgements}        
        \end{itemize}
    }
%
\end{frame}
}

%% end of presentation
\end{document}

%TODO: Todo: 
%0 - install Inkscape
%1- email VNG about general. Usage statistics for tear now.
%2- simulate perf curves with other functions than CLLR

% notes from reviewers:

%First, I miss an analysis of other, from my point of view even more interesting, aspects. For instance, which kinds of add-ons were installed more frequently? Are there correlations to locales? I suspect that eg translation add-ons were much more frequently installed from German than from US users, which could be one reason there was a higher increase for these users. Also, the authors state that the results were better "even in cases where clients have opted to limit the information they choose to share". Why was this aspect not further investigated? How did different settings impact the recommendation quality/installation rate?


%tuning, I do not really see the novelty in their approach: As far as I understood, they perform a rather standard splitting in training and test data and measure the average precision, ie whether recommended items actually appear in the top-n results. The same applies for Sec 2.4 where they propose a metric which at first sight seems very much related to metrics like NDCG. If there actually is a benefit of using this method, the authors should in more detail explain why they use this method. Otherwise, choosing this metric seems rather arbitrary, especially without providing comparisons against configurations with parameters optimized according to other metrics (in particular given that the authors propose this method as one of the paper's main contributions).

% why use the Pi^hat-c metric:  because it reflects the actual thing we are 	 to affect directly. 